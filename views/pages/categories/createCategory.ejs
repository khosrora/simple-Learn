<!--includes -->
<%- include("../../notify/message.ejs") %>
    <%- include("../../notify/error.ejs") %>
        <!--includes -->
        <div class="col-xs-12">
            <div class="widget">
                <div class="widget-header bordered-bottom bordered-lightred">
                    <span class="widget-caption">
                        <%= bread %>
                    </span>
                </div>
                <div class="widget-body">
                    <div id="horizontal-form">
                        <form class="form-horizontal" action="/admin/createCategory" method="post" role="form"
                            id="categoryForm">
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <label for="name" class="">نام دسته
                                        بندی</label>
                                    <input type="" class="form-control" id="name" name="name">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <label class="">دسته اصلی</label>
                                    <select class="form-control" name="parent">
                                        <option value="">دسته اصلی را انتخاب کنید</option>
                                        <% for(let cate of categories ) {%>
                                            <% if (cate.parent===null) {%>
                                                <option value="<%= cate.id %>">
                                                    <%= cate.name %>
                                                </option>
                                                <%}%>
                                                    <%}%>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <label for="name" class="">توضیحات دسته بندی</label>
                                    <textarea id="summernote" name="desc"></textarea>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class=" col-sm-10">
                                    <button type="submit" class="btn btn-default">ایجاد دسته بندی جدید</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <script>
            jQuery.extend(jQuery.validator.messages, {
                required: "وارد کردن این فیلد ضروری است",
                email: "پست الکترونیک درست وارد نشده است",
                number: "لطفا بصورت عدد وارد کنید",
                maxlength: jQuery.validator.format("کلمه عبور خود را بیشتر از 30 کاراکتر انتخاب نکنید"),
                minlength: jQuery.validator.format(".کلمه عبور خود را کمتر از 8 کاراکتر انتخاب نکنید"),
            });

            $(document).ready(function () {
                $.validator.setDefaults({
                    highlight: function (element) {
                        $(element)
                            .closest(".form-group")
                            .addClass("has-error")
                    }
                });

                $('#categoryForm').validate(
                    {
                        rules: {
                            name: {
                                required: true,
                            },
                        }
                    });
            });
        </script>